#!/bin/bash

testDir="../cycleTracksTest"

if [ -d "$testDir" ]; then
    rm -rf $testDir/*
else
    mkdir -p $testDir
fi

cd $testDir

echo "cd $testDir"

git clone git@github.com:keziah55/cycleTracks.git

cd cycleTracks

python3 -m venv .

source bin/activate

pip -V


pip install -r requirements.txt
pip install pytest==6.2.5 pytest-qt pytest-cov pytest-profiling

# test with pyside2, then pyqt5
export QT_API=pyside2
./run_tests

export QT_API=pyqt5
./run_tests

deactivate